{"version":3,"sources":["../../src/js/bezier-ui.js"],"names":["$","fn","bezierFields","options","settings","extend","defaults","selector","coords","count","dataAttribute","fieldClass","updateCanvas","sx","sy","ex","ey","ctx","lineWidth","strokeStyle","clearRect","size","beginPath","moveTo","bezierCurveTo","stroke","uiHtml","id","html","setTextValues","valuesUi","console","log","val","value","replace","values","JSON","parse","attr","i","length","find","text","controlsInit","points","arrayCombine","ui","reverseValue","css","appendHtml","elem","insertAfter","keys","newArray","trueValue","offset","toFixed","each","$count","$this","parent","wrap","canvas","getContext","curveBoundingBox","getBoundingClientRect","$start","siblings","$end","draggable","containment","drag","e","input","accuracy","jQuery","document"],"mappings":"AAAA;;;;AAEA,CAAC,UAASA,CAAT,EAAY;AACXA,IAAEC,EAAF,CAAKC,YAAL,GAAoB,UAAUC,OAAV,EAAoB;;AAEtC,QAAIC,WAAWJ,EAAEK,MAAF,CAAU,EAAV,EAAcL,EAAEC,EAAF,CAAKC,YAAL,CAAkBI,QAAhC,EAA0CH,OAA1C,CAAf;AAAA,QACII,QADJ;AAAA,QAEIC,SAAS,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAFb;AAAA,QAGIC,QAAQ,CAHZ;;AAKA,QAAIL,SAASG,QAAT,IAAqB,WAAzB,EAAsC;AACpCA,iBAAW,WAAWH,SAASM,aAApB,GAAoC,GAA/C;AACD,KAFD,MAGK,IAAIN,SAASG,QAAT,IAAqB,OAAzB,EAAkC;AACrCA,iBAAW,WAAWH,SAASO,UAA/B;AACD;;AAED,aAASC,YAAT,CAAsBC,EAAtB,EAA0BC,EAA1B,EAA8BC,EAA9B,EAAkCC,EAAlC,EAAsCC,GAAtC,EAA2C;AACzCA,UAAIC,SAAJ,GAAgB,CAAhB;AACAD,UAAIE,WAAJ,GAAkB,OAAlB;AACAF,UAAIG,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBhB,SAASiB,IAA7B,EAAmCjB,SAASiB,IAA5C;AACAJ,UAAIK,SAAJ;AACAL,UAAIM,MAAJ,CAAW,CAAX,EAAcnB,SAASiB,IAAvB;AACAJ,UAAIO,aAAJ,CAAkBX,EAAlB,EAAsBC,EAAtB,EAA0BC,EAA1B,EAA8BC,EAA9B,EAAkCZ,SAASiB,IAA3C,EAAiD,CAAjD;AACAJ,UAAIQ,MAAJ;AACD;;AAED,aAASC,MAAT,CAAgBC,EAAhB,EAAoB;AAClB,UAAIN,OAAOjB,SAASiB,IAApB;;AAEA,UAAIO,OAAO,kDAAkDP,IAAlD,GAAyD,cAAzD,GAA0EA,IAA1E,GAAiF,MAA5F;AACIO,aAAOA,OAAO,4DAAP,GAAsED,EAAtE,GAA2E,IAAlF;AACAC,aAAOA,OAAO,6DAAd;AACAA,aAAOA,OAAO,uFAAd;AACAA,aAAOA,OAAO,yFAAd;AACAA,aAAOA,OAAO,2DAAd;AACAA,aAAOA,OAAO,wDAAP,GAAkED,EAAlE,GAAuE,wBAAvE,GAAkGA,EAAlG,GAAuG,YAAvG,GAAsHN,IAAtH,GAA6H,cAA7H,GAA8IA,IAA9I,GAAqJ,eAA5J;AACAO,aAAOA,OAAO,sDAAP,GAAgED,EAAhE,GAAqE,qHAA5E;AACAC,aAAOA,OAAO,QAAd;AACAA,aAAOA,OAAO,QAAd;AACJ,aAAOA,IAAP;AACD;;AAED,aAASC,aAAT,CAAuBF,EAAvB,EAA2B;AACzB,UAAIG,WAAW9B,EAAE,kCAAkC2B,EAAlC,GAAuC,IAAzC,CAAf;AACAI,cAAQC,GAAR,CAAYL,EAAZ;AACA,UAAI3B,EAAE,mBAAmB2B,EAAnB,GAAwB,IAA1B,EAAgCM,GAAhC,MAAyC,EAA7C,EAAiD;AAC/C,YAAIC,QAAQlC,EAAE,mBAAmB2B,EAAnB,GAAwB,IAA1B,EAAgCM,GAAhC,GAAsCE,OAAtC,CAA8C,eAA9C,EAA+D,EAA/D,EAAmEA,OAAnE,CAA2E,GAA3E,EAAgF,EAAhF,CAAZ;AACA,YAAIC,SAASC,KAAKC,KAAL,CAAW,MAAMJ,KAAN,GAAc,GAAzB,CAAb;AACAH,gBAAQC,GAAR,CAAY,YAAYI,MAAxB;AACD,OAJD,MAIO,IAAIpC,EAAE,mBAAmB2B,EAAnB,GAAwB,IAA1B,EAAgCY,IAAhC,CAAqC,aAArC,KAAuD,EAA3D,EAA+D;AACpE,YAAIL,QAAQlC,EAAE,mBAAmB2B,EAAnB,GAAwB,IAA1B,EAAgCY,IAAhC,CAAqC,aAArC,EAAoDJ,OAApD,CAA4D,eAA5D,EAA6E,EAA7E,EAAiFA,OAAjF,CAAyF,GAAzF,EAA8F,EAA9F,CAAZ;AACA,YAAIC,SAASC,KAAKC,KAAL,CAAW,MAAMJ,KAAN,GAAc,GAAzB,CAAb;AACAH,gBAAQC,GAAR,CAAY,kBAAkBI,MAA9B;AACD,OAJM,MAIA;AACL,YAAIA,SAAS,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAAb;AACAL,gBAAQC,GAAR,CAAY,cAAcI,MAA1B;AACD;;AAED,WAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIJ,OAAOK,MAA3B,EAAmCD,GAAnC,EAAwC;AACtCxC,UAAE8B,QAAF,EAAYY,IAAZ,CAAiB,MAAMlC,OAAOgC,CAAP,CAAvB,EAAkCG,IAAlC,CAAuCP,OAAOI,CAAP,CAAvC;AACD;;AAEDI,mBAAaR,MAAb,EAAqBT,EAArB;AACD;;AAED,aAASiB,YAAT,CAAsBR,MAAtB,EAA8BT,EAA9B,EAAkC;AAChC,UAAIkB,SAASC,aAAatC,MAAb,EAAqB4B,MAArB,CAAb;AAAA,UACIW,KAAK/C,EAAE,kCAAkC2B,EAAlC,GAAuC,IAAzC,CADT;;AAGA,WAAK,IAAIa,IAAI,CAAb,EAAgBA,IAAIhC,OAAOiC,MAA3B,EAAmCD,GAAnC,EAAwC;AACtCK,eAAOrC,OAAOgC,CAAP,CAAP,IAAoBQ,aAAaH,OAAOrC,OAAOgC,CAAP,CAAP,CAAb,CAApB;AACD;;AAEDO,SAAGL,IAAH,CAAQ,wBAAR,EAAkCO,GAAlC,CAAsC,EAAC,OAAOJ,OAAO,IAAP,CAAR,EAAsB,QAAQA,OAAO,IAAP,CAA9B,EAAtC;AACAE,SAAGL,IAAH,CAAQ,sBAAR,EAAgCO,GAAhC,CAAoC,EAAC,OAAOJ,OAAO,IAAP,CAAR,EAAsB,QAAQA,OAAO,IAAP,CAA9B,EAApC;AACD;;AAED,aAASK,UAAT,CAAoBC,IAApB,EAA0BxB,EAA1B,EAA8B;AAC5B3B,QAAE0B,OAAOC,EAAP,CAAF,EAAcyB,WAAd,CAA0BD,IAA1B;AACA,UAAIjB,QAAQlC,EAAE,mBAAmB2B,EAAnB,GAAwB,IAA1B,EAAgCM,GAAhC,GAAsCE,OAAtC,CAA8C,eAA9C,EAA+D,EAA/D,EAAmEA,OAAnE,CAA2E,GAA3E,EAAgF,EAAhF,CAAZ;AAAA,UACIC,SAASC,KAAKC,KAAL,CAAW,MAAMJ,KAAN,GAAc,GAAzB,CADb;AAEAL,oBAAcF,EAAd;AACD;;AAED,aAASmB,YAAT,CAAsBO,IAAtB,EAA4BjB,MAA5B,EAAoC;AAClC,UAAIkB,WAAW,EAAf;AACA,UAAId,IAAI,CAAR;;AAEA,UAAI,QAAOa,IAAP,yCAAOA,IAAP,OAAgB,QAApB,EAA8B;AAC5B,eAAO,KAAP;AACD;;AAED,UAAI,QAAOjB,MAAP,yCAAOA,MAAP,OAAkB,QAAtB,EAAgC;AAC9B,eAAO,KAAP;AACD;;AAED,UAAI,OAAOiB,KAAKZ,MAAZ,KAAuB,QAA3B,EAAqC;AACnC,eAAO,KAAP;AACD;;AAED,UAAI,OAAOL,OAAOK,MAAd,KAAyB,QAA7B,EAAuC;AACrC,eAAO,KAAP;AACD;;AAED,UAAI,CAACY,KAAKZ,MAAV,EAAkB;AAChB,eAAO,KAAP;AACD;;AAED,UAAIY,KAAKZ,MAAL,KAAgBL,OAAOK,MAA3B,EAAmC;AACjC,eAAO,KAAP;AACD;;AAED,WAAKD,IAAI,CAAT,EAAYA,IAAIa,KAAKZ,MAArB,EAA6BD,GAA7B,EAAkC;AAChCc,iBAASD,KAAKb,CAAL,CAAT,IAAoBJ,OAAOI,CAAP,CAApB;AACD;;AAED,aAAOc,QAAP;AACD;;AAED,aAASC,SAAT,CAAmBC,MAAnB,EAA2BnC,IAA3B,EAAiC;AAC/B,UAAIa,KAAJ;AAAA,UACIb,OAAOjB,SAASiB,IADpB;;AAGAa,cAAQ,CAACsB,SAASnC,IAAV,EAAgBoC,OAAhB,CAAwB,CAAxB,CAAR;AACA,aAAOvB,KAAP;AACD;;AAED,aAASc,YAAT,CAAsBd,KAAtB,EAA6B;AAC3B,UAAIsB,MAAJ;AAAA,UACInC,OAAOjB,SAASiB,IADpB;;AAGAmC,eAAStB,QAAQb,IAAjB;AACA,aAAOmC,MAAP;AACD;;AAEDxD,MAAEO,QAAF,EAAYmD,IAAZ,CAAiB,YAAW;;AAE1B,UAAIC,SAASlD,KAAb;AAAA,UACImD,QAAQ,IADZ;;AAIA5D,QAAE,IAAF,EAAQuC,IAAR,CAAa,EAAC,eAAeoB,MAAhB,EAAwB,YAAY,EAApC,EAAb;;AAEA,UAAI3D,EAAE,IAAF,EAAQ6D,MAAR,CAAe,OAAf,EAAwBpB,MAAxB,GAAiC,CAArC,EAAwC;AACtCzC,UAAE,IAAF,EAAQ6D,MAAR,GAAiBC,IAAjB,CAAsB,qCAAtB;AACAZ,mBAAWlD,EAAE,IAAF,EAAQ6D,MAAR,EAAX,EAA6BF,MAA7B;AACD,OAHD,MAGO;AACL3D,UAAE,IAAF,EAAQ8D,IAAR,CAAa,qCAAb;AACAZ,mBAAWlD,EAAE,IAAF,CAAX,EAAoB2D,MAApB;AACD;;AAED,UAAII,SAAS/D,EAAE,uBAAuBS,KAAzB,EAAgC,CAAhC,CAAb;AAAA,UACIQ,MAAMjB,EAAE,uBAAuBS,KAAzB,EAAgC,CAAhC,EAAmCuD,UAAnC,CAA8C,IAA9C,CADV;AAAA,UAEIC,mBAAmBF,OAAOG,qBAAP,EAFvB;AAAA,UAGIpC,WAAW9B,EAAE,kCAAkC2D,MAAlC,GAA2C,IAA7C,CAHf;AAAA,UAIIQ,SAASnE,EAAE4D,KAAF,EAASC,MAAT,GAAkBO,QAAlB,GAA6B1B,IAA7B,CAAkC,wBAAlC,CAJb;AAAA,UAKI2B,OAAOrE,EAAE4D,KAAF,EAASC,MAAT,GAAkBO,QAAlB,GAA6B1B,IAA7B,CAAkC,sBAAlC,CALX;;AAOA;AACAyB,aAAOG,SAAP,CAAiB;AACfC,qBAAa,QADE;AAEfC,cAAM,cAASC,CAAT,EAAY;AAChBzE,YAAE8B,QAAF,EAAYY,IAAZ,CAAiB,KAAjB,EAAwBC,IAAxB,CAA6BY,UAAUY,OAAOlB,GAAP,CAAW,KAAX,EAAkBd,OAAlB,CAA0B,IAA1B,EAAgC,EAAhC,CAAV,CAA7B;AACAnC,YAAE8B,QAAF,EAAYY,IAAZ,CAAiB,KAAjB,EAAwBC,IAAxB,CAA6BY,UAAUY,OAAOlB,GAAP,CAAW,MAAX,EAAmBd,OAAnB,CAA2B,IAA3B,EAAiC,EAAjC,CAAV,CAA7B;AACAtB,eAAKsD,OAAOlB,GAAP,CAAW,MAAX,EAAmBd,OAAnB,CAA2B,IAA3B,EAAiC,EAAjC,CAAL;AACArB,eAAKqD,OAAOlB,GAAP,CAAW,KAAX,EAAkBd,OAAlB,CAA0B,IAA1B,EAAgC,EAAhC,CAAL;AACAvB,uBAAaC,EAAb,EAAiBC,EAAjB,EAAqBC,EAArB,EAAyBC,EAAzB,EAA6BC,GAA7B;AACA,cAAIyD,QAAQ,kBACVnB,UAAU1C,EAAV,CADU,GACM,IADN,GAEV0C,UAAUzC,EAAV,CAFU,GAEM,IAFN,GAGVyC,UAAUxC,EAAV,CAHU,GAGM,IAHN,GAIVwC,UAAUvC,EAAV,CAJU,GAIM,GAJlB;AAKAhB,YAAEO,WAAW,gBAAX,GAA8BoD,MAA9B,GAAuC,IAAzC,EAA+C1B,GAA/C,CAAmDyC,KAAnD;AACD;AAdc,OAAjB;;AAiBA;AACAL,WAAKC,SAAL,CAAe;AACbC,qBAAa,QADA;AAEbC,cAAM,cAASC,CAAT,EAAY;AAChBzE,YAAE8B,QAAF,EAAYY,IAAZ,CAAiB,KAAjB,EAAwBC,IAAxB,CAA6BY,UAAUc,KAAKpB,GAAL,CAAS,KAAT,EAAgBd,OAAhB,CAAwB,IAAxB,EAA8B,EAA9B,CAAV,CAA7B;AACAnC,YAAE8B,QAAF,EAAYY,IAAZ,CAAiB,KAAjB,EAAwBC,IAAxB,CAA6BY,UAAUc,KAAKpB,GAAL,CAAS,MAAT,EAAiBd,OAAjB,CAAyB,IAAzB,EAA+B,EAA/B,CAAV,CAA7B;AACApB,eAAKsD,KAAKpB,GAAL,CAAS,MAAT,EAAiBd,OAAjB,CAAyB,IAAzB,EAA+B,EAA/B,CAAL;AACAnB,eAAKqD,KAAKpB,GAAL,CAAS,KAAT,EAAgBd,OAAhB,CAAwB,IAAxB,EAA8B,EAA9B,CAAL;AACAvB,uBAAaC,EAAb,EAAiBC,EAAjB,EAAqBC,EAArB,EAAyBC,EAAzB,EAA6BC,GAA7B;AACA,cAAIyD,QAAQ,kBACVnB,UAAU1C,EAAV,CADU,GACM,IADN,GAEV0C,UAAUzC,EAAV,CAFU,GAEM,IAFN,GAGVyC,UAAUxC,EAAV,CAHU,GAGM,IAHN,GAIVwC,UAAUvC,EAAV,CAJU,GAIM,GAJlB;AAKAhB,YAAEO,WAAW,gBAAX,GAA8BoD,MAA9B,GAAuC,IAAzC,EAA+C1B,GAA/C,CAAmDyC,KAAnD;AACD;AAdY,OAAf;;AAiBA,UAAI7D,KAAKsD,OAAOlB,GAAP,CAAW,KAAX,EAAkBd,OAAlB,CAA0B,IAA1B,EAAgC,EAAhC,CAAT;AAAA,UACIrB,KAAKqD,OAAOlB,GAAP,CAAW,MAAX,EAAmBd,OAAnB,CAA2B,IAA3B,EAAiC,EAAjC,CADT;AAAA,UAEIpB,KAAKsD,KAAKpB,GAAL,CAAS,KAAT,EAAgBd,OAAhB,CAAwB,IAAxB,EAA8B,EAA9B,CAFT;AAAA,UAGInB,KAAKqD,KAAKpB,GAAL,CAAS,MAAT,EAAiBd,OAAjB,CAAyB,IAAzB,EAA+B,EAA/B,CAHT;;AAKAvB,mBAAaC,EAAb,EAAiBC,EAAjB,EAAqBC,EAArB,EAAyBC,EAAzB,EAA6BC,GAA7B;AACAR;AACD,KAlED;AAoED,GAzMD;;AA2MA;AACAT,IAAEC,EAAF,CAAKC,YAAL,CAAkBI,QAAlB,GAA6B;AAC3B4C,gBAAY,KADe;AAE3B3C,cAAU,OAFiB;AAG3BG,mBAAe,aAHY;AAI3BC,gBAAY,cAJe;AAK3BU,UAAM,GALqB;AAM3BsD,cAAU;AANiB,GAA7B;AASD,CAtND,EAsNGC,MAtNH;;AAyNA5E,EAAE6E,QAAF,EAAY3E,YAAZ,CAAyB;AACvBK,YAAU,WADa;AAEvB2C,cAAY,IAFW;AAGvB7B,QAAM,GAHiB;AAIvBsD,YAAU;AAJa,CAAzB","file":"bezier-ui.js","sourcesContent":["'use strict';\n\n(function($) {\n  $.fn.bezierFields = function( options ) {\n\n    var settings = $.extend( {}, $.fn.bezierFields.defaults, options ),\n        selector,\n        coords = ['sx', 'sy', 'ex', 'ey'],\n        count = 0;\n\n    if (settings.selector == 'attribute') {\n      selector = 'input[' + settings.dataAttribute + ']';\n    }\n    else if (settings.selector == 'class') {\n      selector = 'input.' + settings.fieldClass;\n    }\n\n    function updateCanvas(sx, sy, ex, ey, ctx) {\n      ctx.lineWidth = 6;\n      ctx.strokeStyle = \"black\";\n      ctx.clearRect(0, 0, settings.size, settings.size);\n      ctx.beginPath();\n      ctx.moveTo(0, settings.size);\n      ctx.bezierCurveTo(sx, sy, ex, ey, settings.size, 0);\n      ctx.stroke();\n    }\n\n    function uiHtml(id) {\n      var size = settings.size;\n\n      var html = '<div class=\"bezier-ui-wrapper\" style=\"width: ' + size + 'px; height: ' + size + 'px\">';\n          html = html + '<div class=\"coordinate-plane\" data-bezier-ui-coordinates=\"' + id + '\">';\n          html = html + '<span class=\"control-point bezier-ui-start-control\"></span>';\n          html = html + '<div class=\"control-point bezier-ui-end-curve\" style=\"top: 50px; left: 250px;\"></div>';\n          html = html + '<div class=\"control-point bezier-ui-start-curve\" style=\"left: 50px; top: 250px;\"></div>';\n          html = html + '<span class=\"control-point bezier-ui-end-control\"></span>';\n          html = html + '<canvas class=\"bezier-ui-canvas\" id=\"bezier-ui-canvas-' + id + '\" data-bezier-canvas=\"' + id + '\"\" width=\"' + size + 'px\" height=\"' + size + 'px\"></canvas>';\n          html = html + '<span class=\"bezier-ui-value\" data-bezier-ui-value=\"' + id + '\"><span class=\"sx\">0</span>, <span class=\"sy\">0</span>, <span class=\"ex\">0</span>, <span class=\"ey\">0</span></span>'\n          html = html + '</div>';\n          html = html + '</div>';\n      return html;\n    }\n\n    function setTextValues(id) {\n      var valuesUi = $('[data-bezier-ui-coordinates=\"' + id + '\"]');\n      console.log(id);\n      if ($('[data-bezier=\"' + id + '\"]').val() != '') {\n        var value = $('[data-bezier=\"' + id + '\"]').val().replace('cubic-bezier(', '').replace(')', '');\n        var values = JSON.parse(\"[\" + value + \"]\");\n        console.log('Value: ' + values)\n      } else if ($('[data-bezier=\"' + id + '\"]').attr('placeholder') != '') {\n        var value = $('[data-bezier=\"' + id + '\"]').attr('placeholder').replace('cubic-bezier(', '').replace(')', '');\n        var values = JSON.parse(\"[\" + value + \"]\");\n        console.log('Placeholder: ' + values)\n      } else {\n        var values = [0.25, 0.75, 0.75, 0.25];\n        console.log('Default: ' + values)\n      }\n\n      for (var i = 0; i < values.length; i++) {\n        $(valuesUi).find('.' + coords[i]).text(values[i]);\n      }\n\n      controlsInit(values, id);\n    }\n\n    function controlsInit(values, id) {\n      var points = arrayCombine(coords, values),\n          ui = $('[data-bezier-ui-coordinates=\"' + id + '\"]');\n\n      for (var i = 0; i < coords.length; i++) {\n        points[coords[i]] = reverseValue(points[coords[i]]);\n      }\n\n      ui.find('.bezier-ui-start-curve').css({'top': points['sy'], 'left': points['sx']});\n      ui.find('.bezier-ui-end-curve').css({'top': points['ey'], 'left': points['ex']});\n    }\n\n    function appendHtml(elem, id) {\n      $(uiHtml(id)).insertAfter(elem);\n      var value = $('[data-bezier=\"' + id + '\"]').val().replace('cubic-bezier(', '').replace(')', ''),\n          values = JSON.parse(\"[\" + value + \"]\");\n      setTextValues(id);\n    }\n\n    function arrayCombine(keys, values) {\n      var newArray = {};\n      var i = 0;\n\n      if (typeof keys !== 'object') {\n        return false;\n      }\n\n      if (typeof values !== 'object') {\n        return false;\n      }\n\n      if (typeof keys.length !== 'number') {\n        return false;\n      }\n\n      if (typeof values.length !== 'number') {\n        return false;\n      }\n\n      if (!keys.length) {\n        return false;\n      }\n\n      if (keys.length !== values.length) {\n        return false;\n      }\n\n      for (i = 0; i < keys.length; i++) {\n        newArray[keys[i]] = values[i];\n      }\n\n      return newArray;\n    }\n\n    function trueValue(offset, size) {\n      var value,\n          size = settings.size;\n\n      value = (offset / size).toFixed(2);\n      return value;\n    }\n\n    function reverseValue(value) {\n      var offset,\n          size = settings.size;\n\n      offset = value * size;\n      return offset;\n    }\n\n    $(selector).each(function() {\n\n      var $count = count,\n          $this = this;\n\n\n      $(this).attr({'data-bezier': $count, 'disabled': ''});\n\n      if ($(this).parent('label').length > 0) {\n        $(this).parent().wrap('<div class=\"bezier-field-ui\"></div>');\n        appendHtml($(this).parent(), $count);\n      } else {\n        $(this).wrap('<div class=\"bezier-field-ui\"></div>');\n        appendHtml($(this), $count);\n      }\n\n      var canvas = $('#bezier-ui-canvas-' + count)[0],\n          ctx = $('#bezier-ui-canvas-' + count)[0].getContext('2d'),\n          curveBoundingBox = canvas.getBoundingClientRect(),\n          valuesUi = $('[data-bezier-ui-coordinates=\"' + $count + '\"]'),\n          $start = $($this).parent().siblings().find('.bezier-ui-start-curve'),\n          $end = $($this).parent().siblings().find('.bezier-ui-end-curve');\n\n      // Make start control draggable\n      $start.draggable({\n        containment: 'parent',\n        drag: function(e) {\n          $(valuesUi).find('.sy').text(trueValue($start.css('top').replace('px', '')));\n          $(valuesUi).find('.sx').text(trueValue($start.css('left').replace('px', '')));\n          sx = $start.css('left').replace('px', '');\n          sy = $start.css('top').replace('px', '');\n          updateCanvas(sx, sy, ex, ey, ctx);\n          var input = 'cubic-bezier(' +\n            trueValue(sx) + ', ' +\n            trueValue(sy) + ', ' +\n            trueValue(ex) + ', ' +\n            trueValue(ey) + ')';\n          $(selector + '[data-bezier=\"' + $count + '\"]').val(input);\n        }\n      });\n\n      // Make end control draggable\n      $end.draggable({\n        containment: 'parent',\n        drag: function(e) {\n          $(valuesUi).find('.ey').text(trueValue($end.css('top').replace('px', '')));\n          $(valuesUi).find('.ex').text(trueValue($end.css('left').replace('px', '')));\n          ex = $end.css('left').replace('px', '');\n          ey = $end.css('top').replace('px', '');\n          updateCanvas(sx, sy, ex, ey, ctx);\n          var input = 'cubic-bezier(' +\n            trueValue(sx) + ', ' +\n            trueValue(sy) + ', ' +\n            trueValue(ex) + ', ' +\n            trueValue(ey) + ')';\n          $(selector + '[data-bezier=\"' + $count + '\"]').val(input);\n        }\n      });\n\n      var sx = $start.css('top').replace('px', ''),\n          sy = $start.css('left').replace('px', ''),\n          ex = $end.css('top').replace('px', ''),\n          ey = $end.css('left').replace('px', '');\n\n      updateCanvas(sx, sy, ex, ey, ctx);\n      count++;\n    });\n\n  }\n\n  // Plugin defaults – added as a property on our plugin function.\n  $.fn.bezierFields.defaults = {\n    appendHtml: false,\n    selector: 'class',\n    dataAttribute: 'data-bezier',\n    fieldClass: 'bezier-field',\n    size: 300,\n    accuracy: 3\n  };\n\n})(jQuery);\n\n\n$(document).bezierFields({\n  selector: 'attribute',\n  appendHtml: true,\n  size: 300,\n  accuracy: 2\n});\n"]}