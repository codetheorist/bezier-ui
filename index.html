
<!DOCTYPE html>
<head>
<link href="css/jquery-ui.css" rel="stylesheet">
<script src="js/vendor/jquery.js"></script>
<script src="js/vendor/jquery-ui.js"></script>
<style type="text/css">
  .control-point-start,
  .control-point-end {
    width: 15px;
    height:15px;
    border-radius: 50%;
    background:orange;
    text-align:center;
  }
  .bezier-ui {
    width: 300px;
    height: 300px;
  }
</style>
<script type="text/javascript">
(function($) {
  $(function() {

    function control_points_found(parent) {
      var count = $(parent).find('.control-point').length;
      return console.log(count + ' control points found.');
    }

    function bezier_found() {
      return console.log('Found bezier-ui container.');
    }

    function set_bezier_label(class) {

    }

    $('.bezier-ui').each(function() {
      var uiOffset = $(this).offset();
      var uiWidth = $(this).width();
      var uiHeight = $(this).height();
      console.log('Bezier UI Width: ' + uiWidth);
      console.log('Bezier UI Height: ' + uiHeight);
      console.log(uiOffset);
      bezier_found();
      control_points_found(this);

      var controls =  $(this).find('.control-point');
      var cps = $(this).find('.control-point-start');
      var cpe = $(this).find('.control-point-end');

      controls.each(function() {

        $(this).draggable({'containment': 'parent'});

        $(this).mousedown(function() {
          $this = this;

          $(document).mouseup(function() {
            var x = $($this).offset();
            var classes = $($this).attr('class').split(/\s+/);

            if ($.inArray('control-point-start', classes) != -1) {
              $('.X1').text(x.left - uiOffset.left);
              $('.Y1').text(x.top - uiOffset.top);
            }

            if ($.inArray('control-point-end', classes) != -1) {
              $('.X2').text(x.left - uiOffset.left);
              $('.Y2').text(x.top - uiOffset.top);
            }
          });
        });

      });


    });
  });
})(jQuery);

        // $(this).mousedown(function(e) {
        //   var classes = $(this).attr('class').split(/\s+/);
        //   $this = this;
        //   $(document).mouseup(function(e) {
        //     var x = $($this).offset();
        //     console.log(x.top)
        //     console.log(classes);
        //     if ($.inArray('control-point-end', classes) != -1) {
        //       $('.X1').text(x.left);
        //     } else if ($.inArray('control-point-start', classes) != -1){
        //       $('.X2').text(x.left);
        //     }

        //   });
        // })
      // $(function () {
      //    $('#DragMe').draggable({'containment': 'parent'});
      //    $(document).mouseup(function() {
      //     var x = e.pageX, y = e.pageY;
      //     $('.X1').text(x);
      //     $('.Y1').text(y);
      //    })
      // });
   </script>
</head>
<body>
<div class="bezier-ui">
  <div class="control-point control-point-start"></div>
  <div class="control-point control-point-end"></div>
</div>
<div class="coords"><span class="X1">0</span>,<span class="Y1">0</span>,<span class="X2">0</span>,<span class="Y2">0</span></div>
</body>
</html>
